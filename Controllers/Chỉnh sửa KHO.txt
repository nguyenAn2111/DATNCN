	[HttpPost]
        public IActionResult Kho_Import(int strID, string strDate, string strRoom_from, string strRoom_to, string strDevice, string status_id)
        {
            var allDevices = DataProvider<Device>.Instance.GetListItem("tbl_device");
            var device = allDevices.FirstOrDefault(d => d.device_id == strDevice);
            string room_from = device?.FK_room_id ?? "";

            List<Storage> storages = DataProvider<Storage>.Instance.GetListItem("tbl_storage");
            int maxID = 0;
            foreach (var item in storages)
            {
                int id;
                if (int.TryParse(item.storage_id.ToString(), out id))
                {
                    if (id > maxID)
                        maxID = id;
                }
            }
            // storage_id mới = maxID + 1
            int newstrID = maxID + 1;

            strRoom_to = "KHO";

            string query = String.Format(
                "INSERT INTO dbo.tbl_storage (storage_date, FK_device_id, FK_room_id_from, FK_room_id_to) " +
                    "VALUES ('{0}', '{1}', '{2}', '{3}')", strDate, strDevice, strRoom_from, strRoom_to);
            DataProvider<Storage>.Instance.ExcuteQuery(query);

            status_id = "21";
            string updateStatus_device = String.Format("UPDATE dbo.tbl_device SET FK_status_id = '{0}' WHERE device_id = '{1}' ", status_id, strDevice);
            DataProvider<Device>.Instance.ExcuteQuery(updateStatus_device);

            string updateQuery_device = String.Format("UPDATE dbo.tbl_device SET FK_room_id = '{0}' WHERE device_id = '{1}' ", strRoom_to, strDevice);
            DataProvider<Device>.Instance.ExcuteQuery(updateQuery_device);

            return RedirectToAction("Kho");
        }

        [HttpPost]
        public IActionResult Kho_Export(int estrID, string estrDate, string estrRoom_from, string estrRoom_to, string estrDevice, string status_id)
        {
            List<Storage> storages = DataProvider<Storage>.Instance.GetListItem("tbl_storage");
            int maxID = 0;
            foreach (var item in storages)
            {
                int id;
                if (int.TryParse(item.storage_id.ToString(), out id))
                {
                    if (id > maxID)
                        maxID = id;
                }
            }
            // storage_id mới = maxID + 1
            int newstrID = maxID + 1;

            estrRoom_from = "KHO";

            string query = String.Format(
                "INSERT INTO dbo.tbl_storage (storage_date, FK_device_id, FK_room_id_from, FK_room_id_to) " +
                    "VALUES ('{0}', '{1}', '{2}', '{3}')", estrDate, estrDevice, estrRoom_from, estrRoom_to);
            DataProvider<Storage>.Instance.ExcuteQuery(query);

            string updateQuery_device = String.Format("UPDATE dbo.tbl_device SET FK_room_id = '{0}' WHERE device_id = '{1}' ", estrRoom_to, estrDevice);
            DataProvider<Device>.Instance.ExcuteQuery(updateQuery_device);

            status_id = "20";
            
            string updateStatus_device = String.Format("UPDATE dbo.tbl_device SET FK_status_id = '{0}' WHERE device_id = '{1}' ", status_id, estrDevice);
            DataProvider<Device>.Instance.ExcuteQuery(updateStatus_device);

            return RedirectToAction("Kho");
        }
        [HttpPost]
        public IActionResult Kho_Transfer(string strDevice, string strRoom_to, string strDate)
        {
            // Lấy vị trí hiện tại của thiết bị
            var allDevices = DataProvider<Device>.Instance.GetListItem("tbl_device");
            var device = allDevices.FirstOrDefault(d => d.device_id == strDevice);
            string room_from = device?.FK_room_id ?? "";

            // Cập nhật thiết bị sang vị trí mới
            string updateQuery = String.Format(
                "UPDATE dbo.tbl_device SET FK_room_id = '{0}' WHERE device_id = '{1}'",
                strRoom_to, strDevice
            );
            DataProvider<Device>.Instance.ExcuteQuery(updateQuery);

            // Lưu lịch sử vào tbl_storage
            string insertHistory = String.Format(
                "INSERT INTO dbo.tbl_storage (storage_date, FK_device_id, FK_room_id_from, FK_room_id_to) " +
                "VALUES ('{0}', '{1}', '{2}', '{3}')", strDate, strDevice, room_from, strRoom_to
            );
            DataProvider<Storage>.Instance.ExcuteQuery(insertHistory);

            return RedirectToAction("Kho");
        }
